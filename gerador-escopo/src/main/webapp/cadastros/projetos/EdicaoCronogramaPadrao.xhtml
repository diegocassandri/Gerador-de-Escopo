<ui:composition template="/WEB-INF/template/Layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui">

	<f:metadata>
		<o:viewParam name="id"
			value="#{cadastroCronogramaPadraoBean.cronogramaEdicao}" />
	</f:metadata>

	<ui:define name="titulo">Edição Cronograma Padrão</ui:define>

	<ui:define name="corpo">
		<p:messages id="msgs" closable="true" autoUpdate="true" />
		<p:panel header="Dados Gerais">
			<h:form>
				<h:panelGrid columns="2">
					<p:outputLabel value="Código: " for="codigo" />
					<p:outputLabel id="codigo"
						value="#{cadastroCronogramaPadraoBean.cronogramaEdicao.codigo}" />

					<p:outputLabel value="Descrição: " for="descricao" />
					<p:outputLabel id="descricao"
						value="#{cadastroCronogramaPadraoBean.cronogramaEdicao.descricao}" />

					<p:outputLabel value="Produto: " for="produto" />
					<p:outputLabel id="produto"
						value="#{cadastroCronogramaPadraoBean.cronogramaEdicao.produto.descricao}" />
				</h:panelGrid>

			</h:form>
		</p:panel>

		<p:layout style="min-width:40px;min-height:20px;margin-top:10px">
			<p:layoutUnit position="west" resizable="true" header="Atividades"
				maxSize="400">

				<h:form id="frmTree">
					<p:treeTable value="#{cadastroCronogramaPadraoBean.raiz}"
						editable="true" var="raiz" selectionMode="single"
						emptyMessage="Nenhuma atividade encontrada."
						id="treeTableAtividades"
						selection="#{cadastroCronogramaPadraoBean.selectedNode}"
						scrollable="true" scrollHeight="300">

						<f:ajax event="select" update="frmTree painel-tab"
							render="frmTree painel-tab:frmAtividade" />

						<p:column headerText="Descrição" style="width:100px">
							<h:outputText value="#{raiz}" />
						</p:column>

						<f:facet name="footer">
							<p:outputPanel id="pnlBotoes">
								<p:commandButton icon="ui-icon-plus" process="@this"
									value="Adicionar Sintético" update="painel-tab"
									action="#{cadastroCronogramaPadraoBean.addSintetico}">

									<!-- <f:ajax event="click" render="painel-tab" /> -->
								</p:commandButton>

								<p:commandButton icon="ui-icon-plus" process="@this"
									value="Adicionar Análitico" update="painel-tab"
									action="#{cadastroCronogramaPadraoBean.addAnalitico}"
									disabled="#{cadastroCronogramaPadraoBean.selectedNode == null}" />

								<p:commandButton icon="ui-icon-trash" title="Excluir"
									process="@this" update="painel-tab msgs" value="Remover"
									action="#{cadastroCronogramaPadraoBean.excluirAtividade}"
									disabled="#{cadastroCronogramaPadraoBean.selectedNode == null}">
									<p:confirm icon="ui-icon-alert"
										header="Confirmação de exclusão"
										message="Tem certeza que deseja excluir o cronograma?" />
								</p:commandButton>
							</p:outputPanel>
						</f:facet>
					</p:treeTable>
				</h:form>
			</p:layoutUnit>

			<p:layoutUnit position="center" header="Dados Atividade"
				style="height:50px">
				<p:tabView id="painel-tab" widgetVar="tab">
					<p:tab title="Geral">
						<h:form id="frmAtividade">
							<p:defaultCommand target="salvar-button" scope="frmAtividade" />
							<p:outputPanel id="pnlAtividade">
								<h:panelGrid columns="2">
									<p:outputLabel value="Código" for="codigoAtividade" />
									<p:inputText size="8"
										disabled="#{cadastroCronogramaPadraoBean.habilitar == false}"
										value="#{cadastroCronogramaPadraoBean.atividadeEdicao.codigo}"
										id="codigoAtividade" readonly="true" />

									<p:outputLabel value="Tipo:" for="tipo" />
									<p:selectOneMenu id="tipo" disabled="true"
										value="#{cadastroCronogramaPadraoBean.atividadeEdicao.analiticoSitetico}">
										<f:selectItems var="tipo"
											value="#{cadastroCronogramaPadraoBean.tipoList}"
											itemLabel="#{tipo.descricao}" itemValue="#{tipo}" />

									</p:selectOneMenu>

									<p:outputLabel value="Descrição" for="descricaoAtividade" />
									<p:inputText size="30" maxlength="50"
										disabled="#{cadastroCronogramaPadraoBean.habilitar == false}"
										value="#{cadastroCronogramaPadraoBean.atividadeEdicao.descricao}"
										id="descricaoAtividade" />

									<p:outputLabel value="Observação" for="obs" />
									<p:inputTextarea rows="5" cols="40" maxlength="10" id="obs"
										disabled="#{cadastroCronogramaPadraoBean.habilitar == false}"
										value="#{cadastroCronogramaPadraoBean.atividadeEdicao.observacao}"
										autoResize="false" />

									<p:outputLabel value="Quantidade de Horas" for="hora" />
									<p:inputMask size="10" maxlength="30"
										disabled="#{cadastroCronogramaPadraoBean.habilitar == false}"
										value="#{cadastroCronogramaPadraoBean.atividadeEdicao.horaAtividade}"
										id="hora">

									</p:inputMask>

									<p:outputLabel value="Formato Execução:" for="formato" />
									<p:selectOneMenu id="formato"
										disabled="#{cadastroCronogramaPadraoBean.habilitar == false}"
										value="#{cadastroCronogramaPadraoBean.atividadeEdicao.formatoExecucao}">
										<f:selectItems var="formato"
											value="#{cadastroCronogramaPadraoBean.formatoList}"
											itemValue="#{formato}" itemLabel="#{formato.descricao}" />

									</p:selectOneMenu>

									<p:outputLabel value="Reponsável Execução:" for="resp" />
									<p:selectOneMenu id="resp"
										disabled="#{cadastroCronogramaPadraoBean.habilitar == false}"
										value="#{cadastroCronogramaPadraoBean.atividadeEdicao.responsavelExecucao}">
										<f:selectItems var="resp"
											value="#{cadastroCronogramaPadraoBean.responsavelList}"
											itemLabel="#{resp.descricao}" itemValue="#{resp}" />
									</p:selectOneMenu>


									<p:outputLabel value="Equipe:" for="equipe" />
									<p:selectOneMenu filter="true"
										disabled="#{cadastroCronogramaPadraoBean.habilitar == false}"
										value="#{cadastroCronogramaPadraoBean.atividadeEdicao.equipe}"
										converter="omnifaces.SelectItemsConverter" id="equipe">
										<f:selectItem noSelectionOption="true"
											itemLabel="Selecione uma equipe" />
										<f:selectItems
											value="#{cadastroCronogramaPadraoBean.todasEquipes}"
											var="equipe" itemValue="#{equipe}"
											itemLabel="#{equipe.descricao}" />
										<f:ajax event="change" render="nivelEquipe"
											listener="#{cadastroCronogramaPadraoBean.listaNiveisEquipes}" />
									</p:selectOneMenu>

									<p:outputLabel value="Nível Equipe:" for="nivelEquipe"
										id="labelNivel" />
									<p:selectOneMenu filter="true"
										disabled="#{cadastroCronogramaPadraoBean.habilitar == false}"
										value="#{cadastroCronogramaPadraoBean.atividadeEdicao.nivelEquipe}"
										converter="omnifaces.SelectItemsConverter" id="nivelEquipe">
										<f:selectItem noSelectionOption="true"
											itemLabel="Selecione um nível" />
										<f:selectItems
											value="#{cadastroCronogramaPadraoBean.todosNiveisEquipe}"
											var="nivel" itemValue="#{nivel}"
											itemLabel="#{nivel.descricao}" />
									</p:selectOneMenu>

								</h:panelGrid>
								<h:panelGrid columns="2" cellpadding="10">
									<p:commandButton value="Salvar" id="salvar-button"
										disabled="#{cadastroCronogramaPadraoBean.habilitar == false}"
										actionListener="#{cadastroCronogramaPadraoBean.salvarAtividade}"
										process="painel-tab:frmAtividade frmTree:treeTableAtividades" />
									
								</h:panelGrid>

							</p:outputPanel>
						</h:form>
					</p:tab>

					<p:tab title="Documentos">

					</p:tab>

				</p:tabView>

			</p:layoutUnit>

		</p:layout>
	</ui:define>

</ui:composition>
